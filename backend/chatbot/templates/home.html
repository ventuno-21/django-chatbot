{% extends 'base.html' %}

{% block content %}

{% if question %}
<h3>Question: {{ question }}</h3>
<br />
{% endif %}

{% if response and response|slice:":5" == "Error" %}
<div class="alert alert-danger">
  {{ response }}
</div>
{% endif %}

<div class="card">
  <div class="card-header">
    ChatGPT Response
  </div>
  <div class="card-body">
    {% if response %}
    {{ response|safe }}
    {% else %}
    {{ past_responses|safe }}
    {% endif %}
    <br /><br />
  </div>
</div>

<br /><br />

{% if past_responses %}
<form method=POST action="{% url 'home' %}">
  {% csrf_token %}
  <div class="mb-3">
    <input type="hidden" name="past_responses" value="{{ past_responses|safe }}">
  </div>
  <div class="mb-3">
    <input type="text" class="form-control" placeholder="Ask ChatGPT A Question" name="question">
  </div>
  <button type="submit" class="btn btn-secondary">Submit</button>
</form>
{% else %}
<form method=POST action="{% url 'home' %}">
  {% csrf_token %}
  <div class="mb-3">
    <input type="hidden" name="past_responses" value="NoNONOOAnswer">
  </div>
  <div class="mb-3">
    <input type="text" class="form-control" placeholder="Ask ChatGPT A Question" name="question">
  </div>
  <button type="submit" class="btn btn-secondary">Submit</button>
</form>
{% endif %}
{% endblock %}